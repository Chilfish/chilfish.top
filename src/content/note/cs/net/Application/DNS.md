---
title: DNS 域名解析系统
date: 2022-11-12
---

## 概述

<figure><img src="/img/cs/DNS_0.png"/><figcaption>
  DNS 架构
</figcaption></figure>

域名和 IP 地址的映射关系必须保存在域名服务器中，供所有其他应用查询。显然不能将所有信息都储存在一台域名服务器中。DNS 使用**分布在各地**的域名服务器来实现域名到 IP 地址的转换

域名服务器可以划分为以下四种不同的类型：

- **根域名服务器**
  - 根域名服务器是**最高层次的域名服务器**。每个根域名服务器都知道所有的顶级域名服务器的域名及其 IP 地址
  - 因特网上共有 13 个不同 IP 地址的根域名服务器。尽管我们将这 13 个根域名服务器中的每一个都视为单个的服务器，但“每台服务器”实际上是由许多分布在世界各地的计算机构成的服务器群集
  - 当本地域名服务器向根域名服务器发出查询请求时，路由器就把查询请求报文转发到离这个 DNS 客户**最近的一个根域名服务器**。这就加快了 DNS 的查询过程，同时也更合理地利用了因特网的资源
  - 根域名服务器通常并不直接对域名进行解析，而是返回该域名所属顶级域名的顶级域名服务器的 IP 地址
- **顶级域名服务器**
  - 这些域名服务器负责管理在该顶级域名服务器注册的所有二级域名。当收到 DNS 查询请求时就给出相应的回答（可能是最后的结果，也可能是下一级权限域名服务器的 IP 地址）
- **权限域名服务器**
  - 这些域名服务器负责管理某个区的域名。每一个主机的域名都必须在某个权限域名服务器处注册登记。因此权限域名服务器知道其管辖的域名与 IP 地址的映射关系。另外，权限域名服务器还知道其下级域名服务器的地址
- **本地域名服务器**
  - 本地域名服务器不属于上述的域名服务器的等级结构。当一个主机发出 DNS 请求报文时，这个报文就首先被送往该主机的本地域名服务器。本地域名服务器起着代理的作用，会将该报文转发到上述的域名服务器的等级结构中
  - 每一个因特网服务提供者 ISP、一个大学、甚至一个大学里的学院，都可以拥有一个本地域名服务器，它有时也称为默认域名服务器。本地域名服务器离用户较近，一般不超过几个路由器的距离，也有可能就在同一个局域网中。本地域名服务器的 IP 地址需要直接配置在需要域名解析的主机中

## 参考

- [超详细 DNS 协议解析](https://cswiki.top/pages/29c2aa)
