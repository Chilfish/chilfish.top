---
title: TCP 协议
date: 2023-02-19
tags: [note, net]
---

## 运输层

### 概述

### TCP 和 UDP

## TCP

### TCP 报文的首部格式

### TCP 的拥塞控制

TCP 拥塞是指当网络中的传输数据量超过网络容量时，网络出现阻塞或性能下降的现象。TCP 拥塞通常是由以下几个原因引起的：

- **网络带宽不足**：当网络带宽无法满足所有数据传输需求时，就会出现网络拥塞。这种情况通常出现在高峰时段或网络负载过重时

- **路由器缓存不足**：当网络中的路由器缓存空间不足时，路由器就无法及时处理和转发数据包，导致网络拥塞

- **数据包丢失和重传**：当 TCP 发送方无法收到确认信息时，它会重新发送数据包，从而增加网络负载和拥塞风险

- **网络故障和故障恢复**：当网络中出现故障时，如链路中断或路由器故障等，网络性能就会受到影响，导致拥塞

#### TCP 的拥塞控制算法

TCP 的拥塞控制算法是 TCP 协议中用于控制网络拥塞的一组算法，可以确保在网络中传输的数据量不超过网络的容量，从而避免网络拥塞和性能下降。同时，拥塞控制算法也能够适应不同的网络状况和数据传输需求，从而提高 TCP 协议的可靠性和效率

TCP 的拥塞控制算法主要有四个部分：

#### 慢启动

在 TCP 连接刚开始时，拥塞控制算法将发送方的拥塞窗口大小初始化为一个较小的值，然后随着时间的推移，逐步增加拥塞窗口大小，直到达到网络的容量上限或出现拥塞为止

#### 拥塞避免

当网络开始出现拥塞时，TCP 拥塞控制算法将减小拥塞窗口大小，以避免进一步加重网络拥塞。在拥塞避免阶段，TCP 将根据网络状况和拥塞窗口大小等因素动态调整发送速率

#### 快速重传

当 TCP 发送方检测到丢失的数据包时，它将立即发送一个重复确认来请求该数据包的重新发送，而不是等待超时重传。这种快速重传机制可以大大提高网络吞吐量和响应速度

#### 快速恢复

当 TCP 发送方接收到三个重复确认时，它将进入快速恢复状态，并将拥塞窗口大小设置为先前窗口大小的一半，以避免进一步加重网络拥塞
