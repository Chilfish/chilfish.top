---
import { Image } from 'astro:assets'
import LinkBar from './common/LinkBar.astro'
import { fetchProjects } from '~/utils'

const projects = await fetchProjects()
---

<div>
  <LinkBar
    title="Projects"
    href="https://github.com/Chilfish?tab=repositories&type=source"
  />
  <div
    uno-grid="~ cols-1 sm:cols-2"
    class="mt-3 gap-4 trans-all"
  >
    { projects.map(project => (
      <a
        target="_blank"
        rel="noopener noreferrer"
        href={project.url}
        title={project.name}
        class="mx-auto w-90% flex flex-col gap-2 rounded-md p-4 transition-colors sm:w-full"
        uno-bg="dark-7 hover:dark-8"
      >
        <Image
          src={project.banner}
          alt={project.name}
          width={450}
          height={260}
          class="h-42 w-auto rounded-md trans-all sm:h-54"
          uno-object="cover top-center"
        />

        <div class="text-xl">
          { project.name }
        </div>
        <div class="text-sm">
          { project.description }
        </div>

        <div class="mt-auto flex items-center text-3">
          <div
            style={{
              'background-color': project.color,
            }}
            class="mr-1 mt-1 inline-block h-3 w-3 rounded-full shadow-inner"
          />
          <span class="mr-3">{ project.language }</span>

          <span class="i-tabler-star mr-1 mt-0.5 icon h-3 w-3" />
          <span>{ project.stars }</span>

          <span class="i-tabler-license ml-3 mr-1 mt-0.5 icon h-3 w-3" />
          <span>{ project.license }</span>
        </div>
      </a>
    ))}
  </div>
</div>
